<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Phil Chodrow">
<meta name="dcterms.date" content="2022-06-16">

<title>Ariana Mendible - Entropy Measures Diversity</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Ariana Mendible</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="../../../academic_projects.html">
 <span class="dropdown-text">Academic Projects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../personal_projects.html">
 <span class="dropdown-text">Personal Projects</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../assets/files/cv.pdf"> 
<span class="menu-text">CV</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-information-theory" id="toc-why-information-theory" class="nav-link active" data-scroll-target="#why-information-theory">Why Information Theory?</a></li>
  <li><a href="#agenda" id="toc-agenda" class="nav-link" data-scroll-target="#agenda">Agenda</a></li>
  <li><a href="#the-setting" id="toc-the-setting" class="nav-link" data-scroll-target="#the-setting">The Setting</a></li>
  <li><a href="#diversity-and-segregation" id="toc-diversity-and-segregation" class="nav-link" data-scroll-target="#diversity-and-segregation">Diversity and Segregation</a></li>
  <li><a href="#the-guessing-game" id="toc-the-guessing-game" class="nav-link" data-scroll-target="#the-guessing-game">The Guessing Game</a></li>
  <li><a href="#entropy-measures-diversity" id="toc-entropy-measures-diversity" class="nav-link" data-scroll-target="#entropy-measures-diversity">Entropy Measures Diversity</a>
  <ul class="collapse">
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading">Further Reading</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Entropy Measures Diversity</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Phil Chodrow </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 16, 2022</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><strong><em>Editor’s note</em></strong><em>: this post and the following one are hastily revised blog posts from early in my graduate career. They reflect some simplistic thinking about questions of segregation and equity. I am working to do better, and I own all mistakes.</em></p>
<p>This post is about mathematical methods for studying diversity and spatial segregation using information theory. I’d like to stipulate at the outset:</p>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>By <strong>diversity</strong>, I refer to the balanced presence of individuals from multiple groups.</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>By <strong>segregation</strong>, I refer to patterned differences of distributions of people between areas or categories.</p>
</div>
</div>
</div>
<p>More generally, <em>segregation</em> refers to ideology, policy, and social processes. I’m not talking about any of these things: just patterned differences of distributions of people in space.</p>
<section id="why-information-theory" class="level2">
<h2 class="anchored" data-anchor-id="why-information-theory">Why Information Theory?</h2>
<p>Information theory is the mathematical theory of what is <em>learnable</em> and <em>communicable</em>. It might not be obvious that information theory is a promising framework for thinking about diversity and segregation. The study of segregation isn’t usually viewed as an inference or communication engineering problem, and therefore doesn’t get much attention from information theorists and statisticians. On the other hand, sociological researchers in quantitative segregation studies do use information-theoretic measures, but tend to be less concerned about the mathematical subtleties. My goal in this blog post and <a href="../../../posts/2022-06-16-info-segregation-2.qmd">the next</a> is to develop information theory from the ground up as an <em>organizing framework</em> for thinking about diversity segregation. This framework both makes explicit the logic of some of our intuitive thinking about segregation, and also points the way to a wide vista of important extensions, generalizations, and applications.</p>
</section>
<section id="agenda" class="level2">
<h2 class="anchored" data-anchor-id="agenda">Agenda</h2>
<p>The agenda for this series of posts is to formulate and prove a beautiful equation that organizes some key concepts in quantitative segregation studies:</p>
<ul>
<li>An <strong>elementary development of information theory</strong> in the context of categorical segregation. Our main focus will be on the entropy, conditional entropy, and mutual information, and what they mean in this context. We’ll ultimately develop a rather beautiful equation that organizes a few key concepts in segregation studies:</li>
</ul>
<p><span class="math display">\[\text{Global Diversity} = \text{Local Exposure} + \text{Global Segregation}\]</span></p>
<p>In order to cash out each of these terms in math, we are going to study the entropy, conditional entropy, and mutual information.</p>
<p>What mathematical background do you need? I won’t be assuming any prior knowledge of information theory, although it certainly doesn’t hurt.[^1] You’ll need elementary probability theory – concepts like conditional probabilities and expectation values will be enough.</p>
<p>All that said, let’s talk about entropy! First we’ll set up a little toy scenario to analyze.</p>
</section>
<section id="the-setting" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-setting">The Setting</h2>
<p>They say to write what you love, and what I love is tea. Back in my hometown, there’s a great cafe that I used to haunt endlessly in my high school days. The cafe has two main rooms, plus an outdoor garden out back. Schematically, it looks something like this:</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="288"></p>
<figcaption class="margin-caption">My favorite cafe back home.</figcaption>
</figure>
</div>
</div>
</div>
<div class="page-columns page-full"><p>Let’s say the cafe serves just three beverages, all of them different kinds of tea: <strong><font color="#543005">black</font></strong>, <strong><font color="#D73027">red</font></strong>, and <strong><font color="#A1D76A">green</font></strong>.  This being a popular establishment, on any given day, the rooms are full of folks drinking tea. On three different days last week, the shop looked like this:</p><div class="no-row-height column-margin column-container"><span class="margin-aside">With apologies to all white and oolong drinkers. Chamomile, tough.</span></div></div>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="margin-caption">Tea drinkers in the cafe on three different days. Colors encode the kinds of tea they are drinking.</figcaption>
</figure>
</div>
</div>
</div>
<p>Each little square represents a person; there are <span class="math inline">\(6\times 6 = 36\)</span> customers in the shop on both days. On Friday, we had an overwhelming wave of <font color="#A1D76A">green</font> tea fanatics, who left no room for drinkers of any other preferences in the shop. On Saturday, each of the three tea preferences was equally represented, and folks spread themselves throughout the shop more-or-less randomly. On Sunday, the three main tea preferences were again evenly represented, but they were cliquey–folks tended to sit in the same room as people who shared their tea preferences.</p>
</section>
<section id="diversity-and-segregation" class="level1">
<h1>Diversity and Segregation</h1>
<p>We’d like to use the tea shop to explore mathematical questions of <em>diversity</em> and <em>segregation.</em> Intuitively,</p>
<ol type="1">
<li><strong>Diversity</strong> is high when all kinds of tea drinkers (<font color="#543005">black</font>, <font color="#D73027">red</font>, and <font color="#A1D76A">green</font>) are well-represented.</li>
<li><strong>Segregation</strong> is high when different kinds of tea drinkers tend to occupy different rooms.</li>
</ol>
<p>We’ll explore the first idea in this post, and the second idea in the next post.</p>
</section>
<section id="the-guessing-game" class="level1 page-columns page-full">
<h1>The Guessing Game</h1>
<p>You are the manager of the cafe, and I am your assistant. Unfortunately, we ran out of tea today, but I have just enough time to run to our local supplier to restock. I assume that we serve 36 customers in a day, so the only question is how much of each tea I should buy. This shop has a bonus scheme in which I can earn a bonus to my base pay depending on how well the proportions of tea I bought match the customer’s preferences. Before I run out, I scan the room to see who our customers are: based on what they’ve ordered before, I know that the proportions of tea drinkers are <span class="math inline">\(P_\mathrm{black} = p_1\)</span>, <span class="math inline">\(P_\mathrm{green} = p_2\)</span>, and <span class="math inline">\(P_\mathrm{red} = p_3\)</span>. For example, of all the customers, <span class="math inline">\(100 \times p_2\)</span> percent of them prefer green tea. Assuming we don’t sell any other kinds of tea, it must hold that <span class="math inline">\(p_1 + p_2 + p_3 = 1\)</span>, and further that <span class="math inline">\(p_i \geq 0\)</span> for each <span class="math inline">\(i = 1,\ldots,3\)</span>.</p>
<p>I need to buy some tea, in proportions <span class="math inline">\(\hat{p}_1\)</span>, <span class="math inline">\(\hat{p}_2\)</span>, and <span class="math inline">\(\hat{p}_3\)</span>. What are the best proportions I should choose? It’s tempting to say that I should choose <span class="math inline">\(\hat{p} = p\)</span>. That is, I should choose the proportions of tea I buy to perfectly reflect our customer preferences That’s not wrong, but it’s important to understand why. And, as in all things, the reason why hinges on how you, my performance-based manager, are paying me.</p>
<div class="page-columns page-full"><p>Since the shop is paying me based on my performance in matching, my pay is a function <span class="math inline">\(f\)</span> of <span class="math inline">\(p\)</span> – the actual state of the world – and <span class="math inline">\(\hat{p}\)</span> – my action. That is, if the true proportions of customers are given by <span class="math inline">\(p\)</span> and I come back with <span class="math inline">\(\hat{p}\)</span> proportions of black, red, and green teas, then my bonus is <span class="math inline">\(f(p, \hat{p})\)</span>. Somewhat surprisingly, it turns out that there’s only one payment function that encourages me to both (a) act on my best guess about what our customers will most enjoy and (b) rewards me based only on how well my action matched the customers we actually had, not the customers we “might have had.”  This is the <em>cross-entropy</em>:  <span class="math display">\[ f(p, \hat{p}) \triangleq -\sum_i p_i \log \hat{p}_i\;.\]</span></p><div class="no-row-height column-margin column-container"><span class="margin-aside">Technically, these conditions are that the reward function is <em>proper</em> and <em>local.</em> For further discussion about these ideas, you can check out <a href="https://arxiv.org/pdf/1101.5011.pdf">this paper</a>, which also anticipates some elements of our further discussion in the context of scoring with Bregman divergences.</span><span class="margin-aside">You might notice that <span class="math inline">\(f(p, \hat{p}) \leq 0\)</span> for all <span class="math inline">\(p\)</span> and <span class="math inline">\(\hat{p}\)</span>; that is, I’m talking about being paid negative dollars. If this makes you uncomfortable, imagine instead that you are docking my bonus by <span class="math inline">\(-f(p, \hat{p})\)</span>, so that I am docked less the more accurate I am.</span></div></div>
<p>Earlier, we had an intuition that the best thing for me to do was to pick proportions that match our customer preferences, that is, pick <span class="math inline">\(\hat{p} = p\)</span>. This turns out to be correct:</p>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="thm-reward" class="theorem">
<p><span class="theorem-title"><strong>Theorem 1 (Optimality of Empirical Distributions)</strong></span> <em>The true customer proportions maximize the negative cross entropy reward function. Formally,</em></p>
<p><span class="math display">\[p = \text{argmax}_{\hat{p}} f(p, \hat{p})\;.\]</span></p>
</div>
</div>
</div>
</div>
<div class="proof">
<p><span class="proof-title"><em>Proof</em>. </span>There are lots of ways to show this standard fact, but let’s do a simple calculation with Lagrange multipliers. First, we’ll need the gradient of <span class="math inline">\(f\)</span> with respect to the components of <span class="math inline">\(\hat{p}\)</span>, which we calculate as:</p>
<p><span class="math display">\[ \nabla_\hat{p}f(p, \hat{p}) = \left(\frac{p_1}{\hat{p}_1},\cdots, \frac{p_n}{\hat{p}_n}\right)^T\]</span></p>
<p>The Lagrange multipliers come from the constraint that <span class="math inline">\(g(\hat{p}) \triangleq \sum_i \hat{p}_i = 1\)</span>. The gradient of the constraint function is just</p>
<p><span class="math display">\[\nabla_{\hat{p}}  g(\hat{p})  = \underbrace{(1,\ldots,1)^T}_{n \text{ copies}}\;.\]</span></p>
<p>The method of Lagrange multipliers now requires that we find values of <span class="math inline">\(\hat{p}\)</span> and some constant <span class="math inline">\(\lambda \neq 0\)</span> that make the gradients collinear:</p>
<p><span class="math display">\[\begin{align}
    \nabla_\hat{p}f(p, \hat{p}) + \lambda \nabla_{\hat{p}}  g(\hat{p}) &amp;= 0 \\
    g(\hat{p}) &amp;= 1\;.
\end{align}\]</span></p>
<p>This is a system of <span class="math inline">\(n+1\)</span> equations in <span class="math inline">\(n+1\)</span> unknowns (the components of <span class="math inline">\(\hat{p}\)</span> and <span class="math inline">\(\lambda\)</span>), so under reasonable regularity assumptions we expect a unique solution. Solving the first <span class="math inline">\(n\)</span> equations show that <span class="math inline">\(\frac{p_i}{\hat{p}_i} = \frac{p_j}{\hat{p}_j}\)</span> for all <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>, and the constraint implies that <span class="math inline">\(\frac{\hat{p}_i}{p_i} = 1\)</span>, or <span class="math inline">\(\hat{p}_i = p_i\)</span>.</p>
<p>Are we done? Well, technically no: all we’ve shown is that <span class="math inline">\(\hat{p} = p\)</span> is a <em>critical point</em> of <span class="math inline">\(f(p,\hat{p})\)</span>. For full rigor, what we should show next is that (a) this point is the <em>only</em> critical point and that (b) this point is indeed a local maximum. Both of these facts follow directly from the fact that <span class="math inline">\(f\)</span> is <em>strictly concave</em> as a function of <span class="math inline">\(\hat{p}\)</span>. We’ll get into issues of concavity and convexity when we discuss generalizing diversity measures with Bregman divergences in a subsequent post.</p>
</div>
<p><strong>Summing up from this section:</strong> we played a “guessing game,” in which I tried to pick a distribution over tea types <strong><font color="#543005">black</font></strong>, <strong><font color="#D73027">red</font></strong>, and <strong><font color="#A1D76A">green</font></strong> that would maximize my bonus – which was in turn dependent on my performance as evaluated by the negative cross entropy. We proved that my best approach was to pick the distribution over tea types that perfectly mirrors the distribution over customers in the shop. Wasn’t that a fun game?</p>
</section>
<section id="entropy-measures-diversity" class="level1 page-columns page-full">
<h1>Entropy Measures Diversity</h1>
<p>An important consequence of our result is that we can define the <em>optimal reward function</em> in terms of <span class="math inline">\(p\)</span> alone. This function is so important that it has a name: it’s Shannon <em>entropy</em> <span class="math inline">\(H\)</span>, defined as</p>
<p><span class="math display">\[ H(p) \triangleq - \max_\hat{p} f(p, \hat{p}) = - \sum_i p_i \log p_i \;.\]</span></p>
<p>Intuitively, the entropy measures how “hard” the guessing game is: when <span class="math inline">\(H(p)\)</span> is high, my reward in the guessing game is low, <em>even when I make the best possible choice <span class="math inline">\(\hat{p} = p\)</span>.</em></p>
<div class="page-columns page-full"><p>Now, what makes the guessing game hard? The answer is: diversity! To see this, let’s check on a few properties of <span class="math inline">\(H(p)\)</span>. First, suppose that <span class="math inline">\(p = (1,0,0,\ldots)\)</span>, that is, there’s only one type of tea drinker in the cafe. Then, take a moment to convince yourself that <span class="math inline">\(H(p) = 0\)</span>.  It’s easy to see that <span class="math inline">\(H(p)\)</span> is nonnegative for any <span class="math inline">\(p\)</span>, so the single-tea-type cafe is an entropy minimizer. What distribution over tea types is an entropy maximizer? It’s a good exercise to do a Lagrange multiplier analysis similar to the one above to prove the following theorem:</p><div class="no-row-height column-margin column-container"><span class="margin-aside">We are using the convention that <span class="math inline">\(0 \times \log 0 = 0\)</span>.</span></div></div>
<div class="callout callout-style-simple callout-caution no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="thm-entropy-optimality" class="theorem">
<p><span class="theorem-title"><strong>Theorem 2 (Optimality of Entropy)</strong></span> The entropy is maximized by the uniform distribution. Formally, <span class="math inline">\(u = \text{argmax}_p H(p)\)</span>, where <span class="math inline">\(u\)</span> is the uniform distribution on <span class="math inline">\(n\)</span> categories: <span class="math inline">\(u = \left( \frac{1}{n},\cdots,\frac{1}{n} \right)\)</span>.</p>
</div>
</div>
</div>
</div>
<p>Summing up what we just learned, the entropy <span class="math inline">\(H(p)\)</span> is function of the customers in the cafe that determines how hard it is for me to succeed at the guessing game. The entropy is lowest (the game is easiest) when all customers prefer the same kind of tea, that is, when diversity is minimized. The entropy is highest (the game is hardest) when different tea preferences are represented in equal proportions, that is, when diversity is maximized. In summary, <strong>the entropy <span class="math inline">\(H\)</span> is a measure of diversity. It is high when diversity is high, and low when diversity is low.</strong></p>
<p>Let’s wrap up by calculating the entropies for the cafe customers on Friday, Saturday and Sunday cafe. In case you’ve forgotten, they looked like this:</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="margin-caption">Tea drinkers in the cafe on three different days. Colors encode the kinds of tea they are drinking.</figcaption>
</figure>
</div>
</div>
</div>
<p>On Friday, only one tea preference (green) is represented, and so <span class="math inline">\(H(p) = 0\)</span>. On both Saturday and Sunday, since each tea preference is equally represented on both days, <span class="math inline">\(p\)</span> is the uniform distribution: <span class="math inline">\(p = \left(\frac{1}{3}, \frac{1}{3}, \frac{1}{3} \right)\)</span>. In this case, we have <span class="math inline">\(H(p) = \log 3 \approx 1.10\)</span>, the highest possible entropy in a world of just three types of tea drinkers. In summary, Friday had minimal diversity of tea drinkers; Saturday and Sunday had maximal diversity. Notice what the entropy <strong>doesn’t</strong> capture: the difference between Saturday and Sunday. This reflects the fact that <em>segregation</em> is a fundamentally different idea to <em>diversity.</em> We’ll see how to think about this mathematically in the next post.</p>
<section id="further-reading" class="level2">
<h2 class="anchored" data-anchor-id="further-reading">Further Reading</h2>
<ul>
<li>If you’d like to learn more about about information theory, check out Colah’s fantastic blog post, <a href="https://colah.github.io/posts/2015-09-Visual-Information/">Visual Information Theory</a>. That post focuses more on the inferential framework than I will today, but is an all-around fantastic resource.<br>
</li>
<li><a href="https://arxiv.org/pdf/1708.07459.pdf">These notes</a> give a more detailed exposition of the same overall approach and attitude.</li>
<li>The next post in this series is called “<a href="../../../posts/2022-06-16-info-segregation-2.qmd">Information Measures Segregation</a>.”</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>